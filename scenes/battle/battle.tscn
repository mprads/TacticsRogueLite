[gd_scene load_steps=10 format=3 uid="uid://dsuyyr5og7ilh"]

[ext_resource type="Script" uid="uid://bllx2ny3f4d5j" path="res://scenes/battle/battle.gd" id="1_xd4uy"]
[ext_resource type="Resource" uid="uid://tqul7q8whaw6" path="res://resources/battle_maps/testing_6x6.tres" id="2_xd4uy"]
[ext_resource type="Script" uid="uid://cydy5jbmlcs0f" path="res://scenes/battle/battle_manager.gd" id="3_0yh6x"]
[ext_resource type="TileSet" uid="uid://beelur5ybttc6" path="res://resources/64prototype_tile_set.tres" id="3_xd4uy"]
[ext_resource type="Script" uid="uid://bm6kd3ocw6acs" path="res://components/arena.gd" id="5_fh7rg"]
[ext_resource type="Script" uid="uid://dymludwl8mc4g" path="res://components/arena_grid.gd" id="5_h0kxc"]
[ext_resource type="Script" uid="uid://b0vqbai5132oe" path="res://components/unit_mover.gd" id="7_pll4o"]
[ext_resource type="Script" uid="uid://dmyacoedl35kb" path="res://components/tile_highlighter.gd" id="7_py4tk"]
[ext_resource type="Script" uid="uid://bf0vtbnu18chl" path="res://scenes/battle/enemy_manager.gd" id="9_agsc7"]

[node name="Battle" type="Node2D" node_paths=PackedStringArray("battle_manager")]
script = ExtResource("1_xd4uy")
map = ExtResource("2_xd4uy")
battle_manager = NodePath("BattleManager")

[node name="BattleManager" type="Node2D" parent="." node_paths=PackedStringArray("arena", "arena_grid", "bench", "bench_grid")]
unique_name_in_owner = true
script = ExtResource("3_0yh6x")
arena = NodePath("ArenaTileMap")
arena_grid = NodePath("ArenaTileMap/ArenaGrid")
bench = NodePath("BenchTileMap")
bench_grid = NodePath("BenchTileMap/BenchGrid")

[node name="ArenaTileMap" type="TileMapLayer" parent="BattleManager" node_paths=PackedStringArray("arena_grid", "tile_highlighter")]
position = Vector2(196, 157)
tile_set = ExtResource("3_xd4uy")
script = ExtResource("5_fh7rg")
arena_grid = NodePath("ArenaGrid")
tile_highlighter = NodePath("ArenaHighlighter")

[node name="HighlightLayer" type="TileMapLayer" parent="BattleManager/ArenaTileMap"]
tile_set = ExtResource("3_xd4uy")

[node name="ArenaGrid" type="Node2D" parent="BattleManager/ArenaTileMap"]
script = ExtResource("5_h0kxc")

[node name="ArenaHighlighter" type="Node" parent="BattleManager/ArenaTileMap" node_paths=PackedStringArray("arena", "highlight_layer")]
script = ExtResource("7_py4tk")
arena = NodePath("..")
highlight_layer = NodePath("../HighlightLayer")
tile = Vector2i(2, 0)

[node name="BenchTileMap" type="TileMapLayer" parent="BattleManager" node_paths=PackedStringArray("arena_grid", "tile_highlighter")]
position = Vector2(132, 221)
tile_set = ExtResource("3_xd4uy")
script = ExtResource("5_fh7rg")
arena_grid = NodePath("BenchGrid")
tile_highlighter = NodePath("BenchHightlighter")

[node name="HighlightLayer" type="TileMapLayer" parent="BattleManager/BenchTileMap"]
tile_set = ExtResource("3_xd4uy")

[node name="BenchGrid" type="Node2D" parent="BattleManager/BenchTileMap"]
script = ExtResource("5_h0kxc")

[node name="BenchHightlighter" type="Node" parent="BattleManager/BenchTileMap" node_paths=PackedStringArray("arena", "highlight_layer")]
script = ExtResource("7_py4tk")
arena = NodePath("..")
highlight_layer = NodePath("../HighlightLayer")
tile = Vector2i(2, 0)

[node name="UnitMover" type="Node" parent="BattleManager" node_paths=PackedStringArray("arenas")]
script = ExtResource("7_pll4o")
arenas = [NodePath("../ArenaTileMap"), NodePath("../BenchTileMap")]

[node name="EnemyManager" type="Node2D" parent="BattleManager"]
script = ExtResource("9_agsc7")

[node name="UI" type="CanvasLayer" parent="."]

[node name="VBoxContainer" type="VBoxContainer" parent="UI"]
offset_left = 492.0
offset_top = 289.0
offset_right = 624.0
offset_bottom = 345.0

[node name="Label" type="Label" parent="UI/VBoxContainer"]
layout_mode = 2
text = "Battle Scene"

[node name="Button" type="Button" parent="UI/VBoxContainer"]
layout_mode = 2
text = "Return to map"
